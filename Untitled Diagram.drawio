<mxfile host="app.diagrams.net" modified="2021-03-11T13:55:57.574Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36" etag="GFFOlw4KS-6tDqHG53k9" version="13.7.3" type="github">
  <diagram id="Q0m2RmjRIJz71ELetyrk" name="Page-1">
    <mxGraphModel dx="4521" dy="654" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="2339" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="6mpbJJL6t-vMXSuraPCV-1" value="Schema" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="70" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-2" value="&lt;div&gt;static &amp;lt;T extends com.google.protobuf.GeneratedMessageV3&amp;gt; Schema&amp;lt;T&amp;gt; PROTOBUF_NATIVE(&lt;b&gt;Class&amp;lt;T&amp;gt; clazz&lt;/b&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return DefaultImplementation.newProtobufNativeSchema(SchemaDefinition.builder().withPojo(clazz).build());&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="160" width="670" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-3" value="&lt;div&gt;static &amp;lt;T extends com.google.protobuf.GeneratedMessageV3&amp;gt; Schema&amp;lt;T&amp;gt; PROTOBUF_NATIVE(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;b&gt;SchemaDefinition&amp;lt;T&amp;gt; schemaDefinition&lt;/b&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; return DefaultImplementation.newProtobufNativeSchema(schemaDefinition);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="240" width="670" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-4" value="&lt;a title=&quot;pulsar-client-api/src/main/java/org/apache/pulsar/client/internal/DefaultImplementation.java&quot; class=&quot;Link--primary&quot; href=&quot;https://github.com/apache/pulsar/pull/8372/files#diff-56fbb78c5e6f3553c6abb571b3c7d32c5766234fbe3ccfeee4931c840b155562&quot; style=&quot;box-sizing: border-box ; background-color: rgb(250 , 251 , 252) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace&quot;&gt;DefaultImplementation.java&lt;/a&gt;&lt;span style=&quot;color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(250 , 251 , 252)&quot;&gt;&amp;nbsp;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="340" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-5" value="&lt;div&gt;public static &amp;lt;T extends com.google.protobuf.GeneratedMessageV3&amp;gt; Schema&amp;lt;T&amp;gt; newProtobufNativeSchema&lt;/div&gt;&lt;div&gt;(&lt;span&gt;&lt;b&gt;SchemaDefinition schemaDefinition&lt;/b&gt;) {&lt;/span&gt;&lt;span&gt;&amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;(Schema&amp;lt;T&amp;gt;) getStaticMethod(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;org.apache.pulsar.client.impl.schema.ProtobufNativeSchema&quot;, &quot;of&quot;, SchemaDefinition.class)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; .invoke(null, schemaDefinition);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="410" width="780" height="150" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-6" value="&lt;a title=&quot;pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/ProtobufNativeSchema.java&quot; class=&quot;Link--primary&quot; href=&quot;https://github.com/apache/pulsar/pull/8372/files#diff-2307caa16bd34481da63aa37cfa68b7c3c4da0c1bc77126a52c5f3e71e4e9add&quot; style=&quot;box-sizing: border-box ; background-color: rgb(250 , 251 , 252) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace&quot;&gt;ProtobufNativeSchema.java&lt;/a&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="440" y="750" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-7" value="&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box ; color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;ProtobufNativeSchema&amp;lt;T&amp;gt; of (SchemaDefinition&amp;lt;T&amp;gt;)&lt;/span&gt;&lt;span style=&quot;color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="180" y="790" width="310" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-9" value="&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box ; color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;Descriptors&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box ; color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;Descriptor&lt;/span&gt;&lt;span style=&quot;color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt; descriptor &lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt; createProtobufNativeSchema(schemaDefinition&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;getPojo());&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="350" y="860" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-10" value="&lt;table class=&quot;highlight tab-size js-file-line-container&quot; style=&quot;box-sizing: border-box ; border-spacing: 0px ; border-collapse: collapse ; color: rgb(36 , 41 , 46) ; font-size: 14px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;tbody style=&quot;box-sizing: border-box&quot;&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;LC128&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; position: relative ; line-height: 20px ; vertical-align: top ; overflow: visible ; font-size: 12px ; overflow-wrap: normal&quot;&gt;&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;SchemaInfo&amp;nbsp;&lt;/span&gt;schemaInfo&amp;nbsp;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;=&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;SchemaInfo&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;builder()&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L129&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; width: 50px ; min-width: 50px ; font-size: 12px ; line-height: 20px ; text-align: right ; vertical-align: top ; cursor: pointer&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC129&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; position: relative ; line-height: 20px ; vertical-align: top ; overflow: visible ; font-size: 12px ; overflow-wrap: normal&quot;&gt;                .schema(&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;ProtobufNativeSchemaUtils&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;serialize(descriptor))&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L130&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; width: 50px ; min-width: 50px ; font-size: 12px ; line-height: 20px ; text-align: right ; vertical-align: top ; cursor: pointer&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC130&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; position: relative ; line-height: 20px ; vertical-align: top ; overflow: visible ; font-size: 12px ; overflow-wrap: normal&quot;&gt;                .type(&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;SchemaType&lt;/span&gt;&lt;span class=&quot;pl-c1&quot; style=&quot;box-sizing: border-box&quot;&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;PROTOBUF_NATIVE&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L131&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; width: 50px ; min-width: 50px ; font-size: 12px ; line-height: 20px ; text-align: right ; vertical-align: top ; cursor: pointer&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC131&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; position: relative ; line-height: 20px ; vertical-align: top ; overflow: visible ; font-size: 12px ; overflow-wrap: normal&quot;&gt;                .name(&lt;span class=&quot;pl-s&quot; style=&quot;box-sizing: border-box&quot;&gt;&lt;span class=&quot;pl-pds&quot; style=&quot;box-sizing: border-box&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot; style=&quot;box-sizing: border-box&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L132&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; width: 50px ; min-width: 50px ; font-size: 12px ; line-height: 20px ; text-align: right ; vertical-align: top ; cursor: pointer&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC132&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; position: relative ; line-height: 20px ; vertical-align: top ; overflow: visible ; font-size: 12px ; overflow-wrap: normal&quot;&gt;                .properties(schemaDefinition&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;getProperties())&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L133&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; width: 50px ; min-width: 50px ; font-size: 12px ; line-height: 20px ; text-align: right ; vertical-align: top ; cursor: pointer&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC133&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; position: relative ; line-height: 20px ; vertical-align: top ; overflow: visible ; font-size: 12px ; overflow-wrap: normal&quot;&gt;                .build();&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="900" width="550" height="180" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-11" value="&lt;table class=&quot;highlight tab-size js-file-line-container&quot; style=&quot;box-sizing: border-box; border-spacing: 0px; border-collapse: collapse; color: rgb(36, 41, 46); font-size: 14px; font-style: normal; font-weight: 400; letter-spacing: normal; text-transform: none; word-spacing: 0px; background-color: rgb(255, 255, 255);&quot;&gt;&lt;tbody style=&quot;box-sizing: border-box&quot;&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;LC135&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box; padding: 0px 10px; position: relative; line-height: 20px; vertical-align: top; overflow: visible; font-size: 12px; overflow-wrap: normal;&quot;&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;ProtobufNativeSchema&lt;/span&gt;(schemaInfo,&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L136&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box; padding: 0px 10px; width: 50px; min-width: 50px; font-size: 12px; line-height: 20px; text-align: right; vertical-align: top; cursor: pointer;&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC136&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box; padding: 0px 10px; position: relative; line-height: 20px; vertical-align: top; overflow: visible; font-size: 12px; overflow-wrap: normal;&quot;&gt;                    (&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;GeneratedMessageV3&lt;/span&gt;) pojo&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;getMethod(&lt;span class=&quot;pl-s&quot; style=&quot;box-sizing: border-box&quot;&gt;&lt;span class=&quot;pl-pds&quot; style=&quot;box-sizing: border-box&quot;&gt;&quot;&lt;/span&gt;getDefaultInstance&lt;span class=&quot;pl-pds&quot; style=&quot;box-sizing: border-box&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;invoke(&lt;span class=&quot;pl-c1&quot; style=&quot;box-sizing: border-box&quot;&gt;null&lt;/span&gt;));&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="1040" width="550" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-12" value="&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box ; color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;ProtobufNativeSchema&amp;lt;T&amp;gt; of (Class pojo, properties)&lt;/span&gt;&lt;span style=&quot;color: rgb(36 , 41 , 46) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="790" y="800" width="310" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-14" value="&lt;table class=&quot;highlight tab-size js-file-line-container&quot; style=&quot;box-sizing: border-box ; border-spacing: 0px ; border-collapse: collapse ; color: rgb(36 , 41 , 46) ; font-size: 14px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;tbody style=&quot;box-sizing: border-box&quot;&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;LC115&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; position: relative ; line-height: 20px ; vertical-align: top ; overflow: visible ; font-size: 12px ; overflow-wrap: normal&quot;&gt; &lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;SchemaDefinition&amp;lt;&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;T&lt;/span&gt;&amp;gt;&lt;/span&gt; schemaDefinition &lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;SchemaDefinition&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;&amp;gt;&lt;/span&gt;builder()&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;withPojo(pojo)&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;withProperties(properties)&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;build();&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L116&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; width: 50px ; min-width: 50px ; font-size: 12px ; line-height: 20px ; text-align: right ; vertical-align: top ; cursor: pointer&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC116&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box ; padding: 0px 10px ; position: relative ; line-height: 20px ; vertical-align: top ; overflow: visible ; font-size: 12px ; overflow-wrap: normal&quot;&gt;        &lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;ProtobufNativeSchema&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;of(schemaDefinition);&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="790" y="860" width="550" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-16" value="&#xa;&#xa;&lt;table class=&quot;highlight tab-size js-file-line-container&quot; style=&quot;box-sizing: border-box; border-spacing: 0px; border-collapse: collapse; color: rgb(36, 41, 46); font-size: 14px; font-style: normal; font-weight: 400; letter-spacing: normal; text-transform: none; word-spacing: 0px; background-color: rgb(255, 255, 255);&quot;&gt;&lt;tbody style=&quot;box-sizing: border-box&quot;&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;LC63&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box; padding: 0px 10px; position: relative; line-height: 20px; vertical-align: top; overflow: visible; font-size: 12px; overflow-wrap: normal;&quot;&gt; &lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;Method&lt;/span&gt; method &lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;=&lt;/span&gt; pojo&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;getMethod(&lt;span class=&quot;pl-s&quot; style=&quot;box-sizing: border-box&quot;&gt;&lt;span class=&quot;pl-pds&quot; style=&quot;box-sizing: border-box&quot;&gt;&quot;&lt;/span&gt;getDescriptor&lt;span class=&quot;pl-pds&quot; style=&quot;box-sizing: border-box&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L64&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box; padding: 0px 10px; width: 50px; min-width: 50px; font-size: 12px; line-height: 20px; text-align: right; vertical-align: top; cursor: pointer;&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC64&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box; padding: 0px 10px; position: relative; line-height: 20px; vertical-align: top; overflow: visible; font-size: 12px; overflow-wrap: normal;&quot;&gt;            &lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;Descriptors&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;Descriptor&lt;/span&gt; descriptor &lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;=&lt;/span&gt; (&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;Descriptors&lt;/span&gt;&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;pl-smi&quot; style=&quot;box-sizing: border-box&quot;&gt;Descriptor&lt;/span&gt;) method&lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;.&lt;/span&gt;invoke(&lt;span class=&quot;pl-c1&quot; style=&quot;box-sizing: border-box&quot;&gt;null&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box&quot;&gt;&lt;td id=&quot;L65&quot; class=&quot;blob-num js-line-number&quot; style=&quot;box-sizing: border-box; padding: 0px 10px; width: 50px; min-width: 50px; font-size: 12px; line-height: 20px; text-align: right; vertical-align: top; cursor: pointer;&quot;&gt;&lt;/td&gt;&lt;td id=&quot;LC65&quot; class=&quot;blob-code blob-code-inner js-file-line&quot; style=&quot;box-sizing: border-box; padding: 0px 10px; position: relative; line-height: 20px; vertical-align: top; overflow: visible; font-size: 12px; overflow-wrap: normal;&quot;&gt;            &lt;span class=&quot;pl-k&quot; style=&quot;box-sizing: border-box&quot;&gt;return&lt;/span&gt; descriptor;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&#xa;&#xa;" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry x="1" y="341" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="860" as="sourcePoint" />
            <mxPoint x="-270" y="790" as="targetPoint" />
            <mxPoint x="-117" y="-238" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-17" value="" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="950" as="sourcePoint" />
            <mxPoint x="730" y="1290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-19" value="&lt;a title=&quot;pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/ProtobufNativeSchemaUtils.java&quot; class=&quot;Link--primary&quot; href=&quot;https://github.com/apache/pulsar/pull/8372/files#diff-3e61989ee9b0f9593f14a51289c7d5bbe869c4ab742eb54689db63df493a2d96&quot; style=&quot;box-sizing: border-box ; background-color: rgb(250 , 251 , 252) ; font-family: , &amp;#34;consolas&amp;#34; , &amp;#34;liberation mono&amp;#34; , &amp;#34;menlo&amp;#34; , monospace&quot;&gt;ProtobufNativeSchemaUtils.java&lt;/a&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="1320" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-20" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Map&amp;lt;String, FileDescriptorProto&amp;gt; fileDescriptorProtoCache = new HashMap&amp;lt;&amp;gt;();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; //recursively cache all FileDescriptorProto&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; serializeFileDescriptor(descriptor.getFile(), fileDescriptorProtoCache);&lt;/div&gt;&lt;div&gt;&lt;div&gt;String rootMessageTypeName = descriptor.getFullName();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; String rootFileDescriptorName = descriptor.getFile().getFullName();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; //build FileDescriptorSet , this is equal to &amp;lt; protoc --include_imports --descriptor_set_out &amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; byte[] fileDescriptorSet = FileDescriptorSet.newBuilder().addAllFile(fileDescriptorProtoCache.values()).build().toByteArray();&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;//serialize to bytes&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ProtobufNativeSchemaData schemaData = ProtobufNativeSchemaData.builder().fileDescriptorSet(fileDescriptorSet)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; .rootFileDescriptorName(rootFileDescriptorName).rootMessageTypeName(rootMessageTypeName).build();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; schemaDataBytes = new ObjectMapper().writeValueAsBytes(schemaData);&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="1420" width="550" height="210" as="geometry" />
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-21" value="" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="770" y="890" as="sourcePoint" />
            <mxPoint x="520" y="830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6mpbJJL6t-vMXSuraPCV-22" value="&lt;font style=&quot;font-size: 20px&quot;&gt;&lt;b&gt;что это за Pojo класс&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="720" y="720" width="420" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
